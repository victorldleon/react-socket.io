import React, { useEffect, useState } from "react";
import "./TrafficLight.css";
const TrafficLight = (props) => {
  const currentLight = 2;

  useEffect(() => {
    props.socket.on("switch_light", (data) => {
      handleSwitchLight(data.closeLights);
    });
  }, []);

  const handleSwitchLight = (data) => {
    console.log("handleSwitchLight", data);
  };

  return (
    <div className="traffic-light">
      {currentLight === 1 ? (
        <div className="traffic-light-item red">
          <svg
            width="591"
            height="543"
            viewBox="0 0 591 543"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M575.595 213.965L485.344 57.8436C464.803 22.3875 426.834 0 385.752 0H205.248C164.166 0 126.198 21.7722 105.656 57.8436L15.4052 213.965C-5.13505 249.421 -5.13505 293.581 15.4052 329.035L105.656 485.156C126.197 520.612 164.166 543 205.248 543H385.752C426.834 543 464.802 521.228 485.344 485.156L575.595 329.657C596.135 293.584 596.135 250.041 575.595 213.965ZM427.456 261.856V358.886C427.456 403.05 391.355 439.122 347.165 439.122L261.893 439.126C232.639 439.126 207.118 423.576 193.424 400.563H192.803L131.181 279.274C126.201 269.321 130.56 256.882 141.141 251.905C151.722 246.928 164.17 250.66 169.149 260.612L188.443 298.554C192.177 305.397 202.758 302.91 202.758 295.443V141.188C202.758 129.994 212.093 120.662 223.92 120.662C235.747 120.662 245.081 129.99 245.081 141.188V250.659C245.081 255.635 249.44 259.987 254.416 259.987C260.017 259.987 264.376 255.631 264.376 250.659L264.38 124.393C264.38 113.199 273.715 103.867 285.542 103.867C297.369 103.867 306.703 113.195 306.703 124.393V251.281C306.703 256.878 311.062 260.609 316.038 260.609C321.639 260.609 325.998 256.253 325.998 251.281L326.002 141.186C326.002 129.992 335.337 120.66 347.164 120.66C358.99 120.66 368.325 129.988 368.325 141.186V251.901C368.325 257.498 372.684 261.23 377.66 261.23C383.261 261.23 387.62 256.874 387.62 251.901V170.421C387.62 159.847 396.954 150.515 408.781 150.515C420.608 150.515 429.943 159.222 429.943 170.421L429.947 261.854L427.456 261.856Z"
              fill="white"
            />
          </svg>
          <h2>Stop</h2>
        </div>
      ) : (
        <div className="traffic-light-item green">
          <svg
            width="487"
            height="532"
            viewBox="0 0 487 532"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M200.544 16.8274L16.8636 200.567C2.32062 215.11 -3.35938 236.309 1.96162 256.18C7.28582 276.047 22.8056 291.567 42.6766 296.891C62.5436 302.216 83.7426 296.536 98.2896 281.989L243.16 137.169L388.03 281.989C398.827 292.786 413.471 298.852 428.745 298.852C444.015 298.852 458.659 292.786 469.456 281.989C480.253 271.193 486.319 256.548 486.319 241.278C486.319 226.008 480.252 211.364 469.456 200.567L285.776 16.8375L285.776 16.8335C274.964 6.02855 260.292 -0.0184135 245.006 0.0325821L243.158 0.0325821C227.24 -0.502573 211.81 5.57946 200.541 16.8335L200.544 16.8274Z"
              fill="white"
            />
            <path
              d="M245.008 233.097L243.161 233.097C227.243 232.562 211.813 238.644 200.544 249.898L16.8636 433.688C2.32062 448.235 -3.35938 469.434 1.96162 489.301C7.28582 509.172 22.8056 524.692 42.6766 530.016C62.5436 535.341 83.7426 529.657 98.2896 515.114L243.16 370.244L388.03 515.114C398.827 525.911 413.471 531.977 428.745 531.977C444.015 531.977 458.659 525.911 469.456 515.114C480.253 504.318 486.319 489.673 486.319 474.403C486.319 459.13 480.252 444.485 469.456 433.688L285.776 249.958C274.96 239.153 260.296 233.091 245.006 233.103L245.008 233.097Z"
              fill="white"
            />
          </svg>
          <h2>Ambulance crossing</h2>
        </div>
      )}
    </div>
  );
};

export default TrafficLight;
